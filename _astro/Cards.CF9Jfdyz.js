import"./preact.module.BYSHj7yn.js";import{A as x,T as W,q as N,y as U}from"./hooks.module.RibxbAva.js";/* empty css                        */import{u as n}from"./jsxRuntime.module.BLZlUNXw.js";const ee="radial-gradient(farthest-side circle at var(--pointer-x) var(--pointer-y),hsla(266,100%,90%,var(--card-opacity)) 4%,hsla(266,50%,80%,calc(var(--card-opacity)*0.75)) 10%,hsla(266,25%,70%,calc(var(--card-opacity)*0.5)) 50%,hsla(266,0%,60%,0) 100%),radial-gradient(35% 52% at 55% 20%,#00ffaac4 0%,#073aff00 100%),radial-gradient(100% 100% at 50% 50%,#00c1ffff 1%,#073aff00 76%),conic-gradient(from 124deg at 50% 50%,#c137ffff 0%,#07c6ffff 40%,#07c6ffff 60%,#c137ffff 100%)",te="linear-gradient(145deg,#60496e8c 0%,#71C4FF44 100%)",A={SMOOTH_DURATION:600,INITIAL_DURATION:1500,INITIAL_X_OFFSET:70,INITIAL_Y_OFFSET:60,DEVICE_BETA_OFFSET:20},O=(a,s=0,f=100)=>Math.min(Math.max(a,s),f),b=(a,s=3)=>parseFloat(a.toFixed(s)),_=(a,s,f,E,L)=>b(E+(L-E)*(a-s)/(f-s)),ne=a=>a<.5?4*a*a*a:1-Math.pow(-2*a+2,3)/2,ie=({avatarUrl:a="<Placeholder for avatar URL>",iconUrl:s="<Placeholder for icon URL>",grainUrl:f="<Placeholder for grain URL>",behindGradient:E,innerGradient:L,showBehindGradient:R=!0,className:B="",enableTilt:T=!0,enableMobileTilt:S=!1,mobileTiltSensitivity:C=5,miniAvatarUrl:j,name:I="Javi A. Torres",title:z="Software Engineer",status:V="Online",contactUrl:H="https://www.iusspavia.it/",contactText:M="Contact",showUserInfo:J=!0,onContactClick:P})=>{const v=x(null),m=x(null),r=W(()=>{if(!T)return null;let e=null;const t=(o,i,p,h)=>{const g=p.clientWidth,d=p.clientHeight,l=O(100/g*o),u=O(100/d*i),w=l-50,$=u-50,D={"--pointer-x":`${l}%`,"--pointer-y":`${u}%`,"--background-x":`${_(l,0,100,35,65)}%`,"--background-y":`${_(u,0,100,35,65)}%`,"--pointer-from-center":`${O(Math.hypot(u-50,l-50)/50,0,1)}`,"--pointer-from-top":`${u/100}`,"--pointer-from-left":`${l/100}`,"--rotate-x":`${b(-(w/5))}deg`,"--rotate-y":`${b($/4)}deg`};Object.entries(D).forEach(([y,F])=>{h.style.setProperty(y,F)})};return{updateCardTransform:t,createSmoothAnimation:(o,i,p,h,g)=>{const d=performance.now(),l=g.clientWidth/2,u=g.clientHeight/2,w=$=>{const D=$-d,y=O(D/o),F=ne(y),Q=_(F,0,1,i,l),Z=_(F,0,1,p,u);t(Q,Z,h,g),y<1&&(e=requestAnimationFrame(w))};e=requestAnimationFrame(w)},cancelAnimation:()=>{e&&(cancelAnimationFrame(e),e=null)}}},[T]),X=N(e=>{const t=m.current,c=v.current;if(!t||!c||!r)return;const o=t.getBoundingClientRect();r.updateCardTransform(e.clientX-o.left,e.clientY-o.top,t,c)},[r]),Y=N(()=>{const e=m.current,t=v.current;!e||!t||!r||(r.cancelAnimation(),t.classList.add("active"),e.classList.add("active"))},[r]),k=N(e=>{const t=m.current,c=v.current;!t||!c||!r||(r.createSmoothAnimation(A.SMOOTH_DURATION,e.offsetX,e.offsetY,t,c),c.classList.remove("active"),t.classList.remove("active"))},[r]),q=N(e=>{const t=m.current,c=v.current;if(!t||!c||!r)return;const{beta:o,gamma:i}=e;!o||!i||r.updateCardTransform(t.clientHeight/2+i*C,t.clientWidth/2+(o-A.DEVICE_BETA_OFFSET)*C,t,c)},[r,C]);U(()=>{if(!T||!r)return;const e=m.current,t=v.current;if(!e||!t)return;const c=X,o=Y,i=k,p=q,h=()=>{!S||location.protocol!=="https:"||(typeof window.DeviceMotionEvent.requestPermission=="function"?window.DeviceMotionEvent.requestPermission().then(d=>{d==="granted"&&window.addEventListener("deviceorientation",p)}).catch(d=>console.error(d)):window.addEventListener("deviceorientation",p))};if(!(window.innerWidth<=768)){e.addEventListener("pointerenter",o),e.addEventListener("pointermove",c),e.addEventListener("pointerleave",i),e.addEventListener("click",h);const d=t.clientWidth-A.INITIAL_X_OFFSET,l=A.INITIAL_Y_OFFSET;r.updateCardTransform(d,l,e,t),r.createSmoothAnimation(A.INITIAL_DURATION,d,l,e,t)}return()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointermove",c),e.removeEventListener("pointerleave",i),e.removeEventListener("click",h),window.removeEventListener("deviceorientation",p),r.cancelAnimation()}},[T,S,r,X,Y,k,q]),U(()=>{const e=m.current;if(!e)return;const t=new IntersectionObserver(c=>{c.forEach(o=>{if(o.isIntersecting){const i=o.target;i.style.opacity="1",i.style.visibility="visible"}})},{threshold:.1,rootMargin:"50px"});return t.observe(e),()=>{t.unobserve(e)}},[]);const G=W(()=>({"--icon":s?`url(${s})`:"none","--grain":f?`url(${f})`:"none","--behind-gradient":R?E??ee:"none","--inner-gradient":L??te}),[s,f,R,E,L]),K=N(()=>{P?.()},[P]);return n("div",{ref:v,className:`pc-card-wrapper ${B}`.trim(),style:G,children:n("section",{ref:m,className:"pc-card",children:n("div",{className:"pc-inside",children:[n("div",{className:"pc-shine"}),n("div",{className:"pc-glare"}),n("div",{className:"pc-content pc-avatar-content",children:[n("img",{className:"avatar",src:a,alt:`${I||"User"} avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.display="none"}}),J&&n("div",{className:"pc-user-info",children:[n("div",{className:"pc-user-details",children:[n("div",{className:"pc-mini-avatar",children:n("img",{src:j||a,alt:`${I||"User"} mini avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.opacity="0.5",t.src=a}})}),n("div",{className:"pc-user-text",children:[n("div",{className:"pc-handle"}),n("div",{className:"pc-status",style:{textAlign:"left"},children:V})]})]}),H?n("a",{href:H,className:"pc-contact-btn",target:"_blank",rel:"noopener noreferrer","aria-label":`Contact ${I||"user"}`,children:M}):n("button",{className:"pc-contact-btn",onClick:K,style:{pointerEvents:"auto"},type:"button","aria-label":`Contact ${I||"user"}`,children:M})]})]}),n("div",{className:"pc-content",children:n("div",{className:"pc-details",children:[n("h3",{children:I}),n("p",{children:z})]})})]})})})};export{ie as default};
