import"./preact.module.VggkKIQP.js";import{A as x,T as U,q as I,y as Z}from"./hooks.module.DB-v1BMu.js";/* empty css                        */import{u as n}from"./jsxRuntime.module.CeWk3uBp.js";const ee="radial-gradient(farthest-side circle at var(--pointer-x) var(--pointer-y),hsla(266,100%,90%,var(--card-opacity)) 4%,hsla(266,50%,80%,calc(var(--card-opacity)*0.75)) 10%,hsla(266,25%,70%,calc(var(--card-opacity)*0.5)) 50%,hsla(266,0%,60%,0) 100%),radial-gradient(35% 52% at 55% 20%,#00ffaac4 0%,#073aff00 100%),radial-gradient(100% 100% at 50% 50%,#00c1ffff 1%,#073aff00 76%),conic-gradient(from 124deg at 50% 50%,#c137ffff 0%,#07c6ffff 40%,#07c6ffff 60%,#c137ffff 100%)",te="linear-gradient(145deg,#60496e8c 0%,#71C4FF44 100%)",A={SMOOTH_DURATION:600,INITIAL_DURATION:1500,INITIAL_X_OFFSET:70,INITIAL_Y_OFFSET:60,DEVICE_BETA_OFFSET:20},y=(a,s=0,f=100)=>Math.min(Math.max(a,s),f),R=(a,s=3)=>parseFloat(a.toFixed(s)),O=(a,s,f,g,L)=>R(g+(L-g)*(a-s)/(f-s)),ne=a=>a<.5?4*a*a*a:1-Math.pow(-2*a+2,3)/2,ie=({avatarUrl:a="<Placeholder for avatar URL>",iconUrl:s="<Placeholder for icon URL>",grainUrl:f="<Placeholder for grain URL>",behindGradient:g,innerGradient:L,showBehindGradient:S=!0,className:W="",enableTilt:T=!0,enableMobileTilt:H=!1,mobileTiltSensitivity:C=5,miniAvatarUrl:B,name:N="Javi A. Torres",title:j="Software Engineer",status:z="Online",contactUrl:P="https://www.iusspavia.it/",contactText:X="Contact",showUserInfo:V=!0,onContactClick:Y})=>{const u=x(null),v=x(null),r=U(()=>{if(!T)return null;let e=null;const t=(o,d,l,h)=>{const p=l.clientWidth,E=l.clientHeight,i=y(100/p*o),m=y(100/E*d),F=i-50,$=m-50,D={"--pointer-x":`${i}%`,"--pointer-y":`${m}%`,"--background-x":`${O(i,0,100,35,65)}%`,"--background-y":`${O(m,0,100,35,65)}%`,"--pointer-from-center":`${y(Math.hypot(m-50,i-50)/50,0,1)}`,"--pointer-from-top":`${m/100}`,"--pointer-from-left":`${i/100}`,"--rotate-x":`${R(-(F/5))}deg`,"--rotate-y":`${R($/4)}deg`};Object.entries(D).forEach(([_,w])=>{h.style.setProperty(_,w)})};return{updateCardTransform:t,createSmoothAnimation:(o,d,l,h,p)=>{const E=performance.now(),i=p.clientWidth/2,m=p.clientHeight/2,F=$=>{const D=$-E,_=y(D/o),w=ne(_),K=O(w,0,1,d,i),Q=O(w,0,1,l,m);t(K,Q,h,p),_<1&&(e=requestAnimationFrame(F))};e=requestAnimationFrame(F)},cancelAnimation:()=>{e&&(cancelAnimationFrame(e),e=null)}}},[T]),M=I(e=>{const t=v.current,c=u.current;if(!t||!c||!r)return;const o=t.getBoundingClientRect();r.updateCardTransform(e.clientX-o.left,e.clientY-o.top,t,c)},[r]),k=I(()=>{const e=v.current,t=u.current;!e||!t||!r||(r.cancelAnimation(),t.classList.add("active"),e.classList.add("active"))},[r]),b=I(e=>{const t=v.current,c=u.current;!t||!c||!r||(r.createSmoothAnimation(A.SMOOTH_DURATION,e.offsetX,e.offsetY,t,c),c.classList.remove("active"),t.classList.remove("active"))},[r]),q=I(e=>{const t=v.current,c=u.current;if(!t||!c||!r)return;const{beta:o,gamma:d}=e;!o||!d||r.updateCardTransform(t.clientHeight/2+d*C,t.clientWidth/2+(o-A.DEVICE_BETA_OFFSET)*C,t,c)},[r,C]);Z(()=>{if(!T||!r)return;const e=v.current,t=u.current;if(!e||!t)return;const c=M,o=k,d=b,l=q,h=()=>{!H||location.protocol!=="https:"||(typeof window.DeviceMotionEvent.requestPermission=="function"?window.DeviceMotionEvent.requestPermission().then(i=>{i==="granted"&&window.addEventListener("deviceorientation",l)}).catch(i=>console.error(i)):window.addEventListener("deviceorientation",l))};e.addEventListener("pointerenter",o),e.addEventListener("pointermove",c),e.addEventListener("pointerleave",d),e.addEventListener("click",h);const p=t.clientWidth-A.INITIAL_X_OFFSET,E=A.INITIAL_Y_OFFSET;return r.updateCardTransform(p,E,e,t),r.createSmoothAnimation(A.INITIAL_DURATION,p,E,e,t),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointermove",c),e.removeEventListener("pointerleave",d),e.removeEventListener("click",h),window.removeEventListener("deviceorientation",l),r.cancelAnimation()}},[T,H,r,M,k,b,q]);const J=U(()=>({"--icon":s?`url(${s})`:"none","--grain":f?`url(${f})`:"none","--behind-gradient":S?g??ee:"none","--inner-gradient":L??te}),[s,f,S,g,L]),G=I(()=>{Y?.()},[Y]);return n("div",{ref:u,className:`pc-card-wrapper ${W}`.trim(),style:J,children:n("section",{ref:v,className:"pc-card",children:n("div",{className:"pc-inside",children:[n("div",{className:"pc-shine"}),n("div",{className:"pc-glare"}),n("div",{className:"pc-content pc-avatar-content",children:[n("img",{className:"avatar",src:a,alt:`${N||"User"} avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.display="none"}}),V&&n("div",{className:"pc-user-info",children:[n("div",{className:"pc-user-details",children:[n("div",{className:"pc-mini-avatar",children:n("img",{src:B||a,alt:`${N||"User"} mini avatar`,loading:"lazy",onError:e=>{const t=e.target;t.style.opacity="0.5",t.src=a}})}),n("div",{className:"pc-user-text",children:[n("div",{className:"pc-handle"}),n("div",{className:"pc-status",style:{textAlign:"left"},children:z})]})]}),P?n("a",{href:P,className:"pc-contact-btn",target:"_blank",rel:"noopener noreferrer","aria-label":`Contact ${N||"user"}`,children:X}):n("button",{className:"pc-contact-btn",onClick:G,style:{pointerEvents:"auto"},type:"button","aria-label":`Contact ${N||"user"}`,children:X})]})]}),n("div",{className:"pc-content",children:n("div",{className:"pc-details",children:[n("h3",{children:N}),n("p",{children:j})]})})]})})})};export{ie as default};
